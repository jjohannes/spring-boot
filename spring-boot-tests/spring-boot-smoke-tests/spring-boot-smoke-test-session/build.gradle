plugins {
	id "java"
	id "org.springframework.boot.conventions"
}

description = "Spring Boot Session smoke test"

def sessionStores = [
	"hazelcast": [
		"com.hazelcast:hazelcast",
		"org.springframework.session:spring-session-hazelcast"
	],
	"jdbc": [
		"org.springframework.boot:spring-boot-starter-jdbc",
		"org.springframework.session:spring-session-jdbc"		,
		"com.h2database:h2"
	],
	"mongodb": [
		"org.springframework.boot:spring-boot-starter-data-mongodb",
		"org.springframework.session:spring-session-data-mongodb"
	],
	"redis": [
		"org.springframework.boot:spring-boot-starter-data-redis",
		"org.springframework.session:spring-session-data-redis"
	]
]

dependencies {
	implementation("org.springframework.boot:spring-boot-starter-actuator")
	implementation("org.springframework.boot:spring-boot-starter-security")
	implementation("org.springframework.boot:spring-boot-starter-web")

	sessionStores[project.findProperty("sessionStore") ?: "jdbc"].each { runtimeOnly it }

	testImplementation("org.springframework.boot:spring-boot-starter-test")
}
